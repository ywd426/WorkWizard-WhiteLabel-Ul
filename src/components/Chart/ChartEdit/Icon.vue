<template>
  <div ref="iconDom" class="icon">
    <svg v-if="props.type == 'foldingLine'" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M4.99902 3.37566C5.43 3.37566 5.84333 3.54686 6.14807 3.85161C6.45282 4.15635 6.62402 4.56968 6.62402 5.00066V33.3757H34.999C35.3885 33.3756 35.765 33.5154 36.06 33.7696C36.3551 34.0238 36.549 34.3755 36.6065 34.7607L36.624 35.0007C36.624 35.4316 36.4528 35.845 36.1481 36.1497C35.8433 36.4544 35.43 36.6257 34.999 36.6257H4.99902C4.56805 36.6257 4.15472 36.4544 3.84997 36.1497C3.54523 35.845 3.37402 35.4316 3.37402 35.0007V5.00066C3.37402 4.56968 3.54523 4.15635 3.84997 3.85161C4.15472 3.54686 4.56805 3.37566 4.99902 3.37566Z"
        :fill="color[0]"
      />
      <path
        d="M31.4772 21.7427C31.9288 21.5478 32.4389 21.5382 32.8976 21.716C33.3562 21.8937 33.7266 22.2446 33.929 22.6929C34.1313 23.1412 34.1494 23.6511 33.9793 24.1127C33.8092 24.5742 33.4646 24.9504 33.0197 25.1602L25.1897 28.6927C24.7959 28.8713 24.3526 28.9084 23.9347 28.7977L17.4172 27.0577L11.0547 31.3977C10.6835 31.6509 10.2338 31.7624 9.78734 31.7119C9.34089 31.6615 8.92741 31.4524 8.62216 31.1227L8.44966 30.9052C8.31073 30.7016 8.21332 30.4725 8.16301 30.2312C8.11269 29.9899 8.11046 29.741 8.15643 29.4988C8.20241 29.2566 8.2957 29.0259 8.43095 28.8198C8.5662 28.6137 8.74077 28.4362 8.94466 28.2977L16.0147 23.4777C16.2374 23.3258 16.4903 23.2237 16.756 23.1784C17.0218 23.1331 17.2942 23.1457 17.5547 23.2152L24.2547 24.9977L31.4797 21.7427H31.4772Z"
        :fill="color[1]"
      />
      <path
        d="M30.8172 6.2927C30.9765 6.10474 31.1712 5.94999 31.3902 5.83728C31.6092 5.72456 31.8483 5.6561 32.0938 5.63578C32.3393 5.61547 32.5864 5.64371 32.821 5.71889C33.0556 5.79407 33.273 5.91472 33.461 6.07395C33.649 6.23317 33.8037 6.42786 33.9164 6.6469C34.0291 6.86593 34.0976 7.10502 34.1179 7.35052C34.1382 7.59601 34.11 7.8431 34.0348 8.07768C33.9596 8.31227 33.839 8.52974 33.6797 8.7177L25.8498 17.9702C25.6054 18.2585 25.2796 18.4663 24.9151 18.5662C24.5507 18.6661 24.1645 18.6536 23.8072 18.5302L18.0747 16.5552L11.7097 30.6202C11.523 31.0333 11.193 31.3647 10.7807 31.5531C10.3684 31.7416 9.90179 31.7743 9.46725 31.6452L9.22975 31.5552C8.77705 31.3501 8.42429 30.9737 8.24897 30.5087C8.07365 30.0437 8.09011 29.5281 8.29475 29.0752L15.3647 13.4552C15.5573 13.0294 15.9019 12.6908 16.3311 12.5058C16.7602 12.3208 17.243 12.3028 17.6847 12.4552L23.8147 14.5702L30.8197 6.2952L30.8172 6.2927Z"
        :fill="color[0]"
      />
    </svg>
    <svg v-if="props.type === 'scatter'" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M17.3055 24.0413C17.1243 23.9601 16.9502 23.8641 16.7849 23.7541C16.5369 24.4604 16.0743 25.0714 15.4619 25.5018C14.8494 25.9322 14.1177 26.1603 13.3692 26.1543C12.6207 26.1484 11.8927 25.9086 11.2872 25.4685C10.6817 25.0284 10.229 24.41 9.99224 23.6999C9.75553 22.9898 9.74673 22.2234 9.96707 21.5081C10.1874 20.7927 10.6259 20.1641 11.2211 19.7102C11.8163 19.2563 12.5386 18.9999 13.2868 18.9767C14.035 18.9535 14.7717 19.1648 15.3939 19.581C15.631 18.9037 16.0658 18.3129 16.642 17.8851C17.2182 17.4572 17.9094 17.2119 18.6265 17.1808C19.3435 17.1497 20.0534 17.3342 20.6645 17.7106C21.2756 18.0869 21.7599 18.6378 22.0548 19.2921C22.5841 19.5311 23.0474 19.895 23.4051 20.3526C23.7628 20.8101 24.0042 21.3476 24.1085 21.9189C24.2128 22.4902 24.1769 23.0783 24.0039 23.6326C23.8309 24.187 23.5261 24.6912 23.1154 25.1018C22.7047 25.5125 22.2006 25.8174 21.6462 25.9903C21.0917 26.1633 20.5037 26.1992 19.9323 26.0949C19.361 25.9906 18.8235 25.7493 18.366 25.3916C17.9085 25.0339 17.5445 24.5705 17.3055 24.0413ZM16.9878 22.5641C16.9878 22.9805 16.916 23.3808 16.7867 23.7523L16.9878 22.5641ZM9.80808 17.1795C9.33666 17.1795 8.86985 17.0866 8.43431 16.9062C7.99877 16.7258 7.60303 16.4614 7.26969 16.1281C6.93634 15.7947 6.67191 15.399 6.49151 14.9635C6.3111 14.528 6.21825 14.0612 6.21825 13.5897C6.21825 13.1183 6.3111 12.6515 6.49151 12.216C6.67191 11.7805 6.93634 11.3847 7.26969 11.0514C7.60303 10.7181 7.99877 10.4537 8.43431 10.2733C8.86985 10.0929 9.33666 10 9.80808 10C10.7602 10 11.6733 10.3782 12.3465 11.0514C13.0197 11.7246 13.3979 12.6377 13.3979 13.5897C13.3979 14.5418 13.0197 15.4549 12.3465 16.1281C11.6733 16.8013 10.7602 17.1795 9.80808 17.1795ZM4.42333 33.3333C3.47125 33.3333 2.55816 32.9551 1.88493 32.2819C1.21171 31.6087 0.833496 30.6956 0.833496 29.7436C0.833496 28.7915 1.21171 27.8785 1.88493 27.2053C2.55816 26.532 3.47125 26.1538 4.42333 26.1538C5.37541 26.1538 6.2885 26.532 6.96173 27.2053C7.63495 27.8785 8.01316 28.7915 8.01316 29.7436C8.01316 30.6956 7.63495 31.6087 6.96173 32.2819C6.2885 32.9551 5.37541 33.3333 4.42333 33.3333Z"
        :fill="color[1]"
      />
      <path
        d="M7.96716 23.9983C7.82776 24.5106 7.81454 25.0462 7.92851 25.5641C8.04248 26.082 8.28063 26.5686 8.6248 26.9867C8.96896 27.4048 9.41006 27.7435 9.91445 27.9769C10.4188 28.2103 10.9732 28.3322 11.5353 28.3333C12.4405 28.3332 13.314 28.0195 13.9891 27.452C14.6642 26.8845 15.0936 26.1031 15.1955 25.2567C15.8969 25.6446 16.7151 25.8031 17.5223 25.7075C18.3295 25.6119 19.0804 25.2676 19.6578 24.7282C20.2352 24.1889 20.6066 23.4848 20.7141 22.726C20.8216 21.9672 20.6591 21.1962 20.252 20.5333C20.575 20.0063 20.745 19.4086 20.7448 18.8002C20.7445 18.1918 20.5742 17.5942 20.2508 17.0673C19.9274 16.5405 19.4623 16.1031 18.9023 15.7989C18.3423 15.4948 17.7072 15.3347 17.0606 15.3347C16.414 15.3347 15.7789 15.4948 15.2189 15.7989C14.6589 16.1031 14.1938 16.5405 13.8704 17.0673C13.547 17.5942 13.3766 18.1918 13.3764 18.8002C13.3762 19.4086 13.5462 20.0063 13.8692 20.5333C13.6162 20.9459 13.4569 21.4033 13.4013 21.8767C12.8019 21.5446 12.1144 21.3799 11.4192 21.4017C11.5586 20.8894 11.5718 20.3538 11.4579 19.8359C11.3439 19.318 11.1057 18.8315 10.7616 18.4133C10.4174 17.9952 9.97632 17.6565 9.47193 17.4231C8.96754 17.1897 8.41317 17.0678 7.85111 17.0667C7.36237 17.0666 6.87851 17.1581 6.42771 17.3357C5.9769 17.5133 5.56816 17.7736 5.22529 18.1013C4.88241 18.429 4.61226 18.8176 4.43057 19.2445C4.24887 19.6715 4.15926 20.1281 4.16696 20.5879C4.17466 21.0478 4.27951 21.5016 4.47541 21.9229C4.6713 22.3442 4.95433 22.7246 5.30801 23.042C5.66168 23.3594 6.07893 23.6074 6.53546 23.7716C6.99199 23.9358 7.47867 24.0128 7.96716 23.9983ZM35.4823 13.6C34.5052 13.6 33.5682 13.2348 32.8772 12.5846C32.1863 11.9345 31.7982 11.0528 31.7982 10.1333C31.7982 9.21392 32.1863 8.33216 32.8772 7.68203C33.5682 7.03191 34.5052 6.66667 35.4823 6.66667C36.4594 6.66667 37.3965 7.03191 38.0874 7.68203C38.7784 8.33216 39.1665 9.21392 39.1665 10.1333C39.1665 11.0528 38.7784 11.9345 38.0874 12.5846C37.3965 13.2348 36.4594 13.6 35.4823 13.6ZM31.7982 27.4667C31.3144 27.4667 30.8353 27.377 30.3883 27.2028C29.9413 27.0286 29.5352 26.7732 29.1931 26.4513C28.851 26.1294 28.5796 25.7472 28.3945 25.3266C28.2093 24.906 28.114 24.4553 28.114 24C28.114 23.5448 28.2093 23.094 28.3945 22.6734C28.5796 22.2528 28.851 21.8706 29.1931 21.5487C29.5352 21.2268 29.9413 20.9714 30.3883 20.7972C30.8353 20.623 31.3144 20.5333 31.7982 20.5333C32.7753 20.5333 33.7124 20.8986 34.4033 21.5487C35.0942 22.1988 35.4823 23.0806 35.4823 24C35.4823 24.9194 35.0942 25.8012 34.4033 26.4513C33.7124 27.1014 32.7753 27.4667 31.7982 27.4667ZM24.4298 18.8C23.946 18.8 23.467 18.7103 23.02 18.5361C22.573 18.3619 22.1669 18.1066 21.8247 17.7846C21.4826 17.4627 21.2113 17.0806 21.0261 16.66C20.841 16.2394 20.7457 15.7886 20.7457 15.3333C20.7457 14.8781 20.841 14.4273 21.0261 14.0067C21.2113 13.5861 21.4826 13.2039 21.8247 12.882C22.1669 12.5601 22.573 12.3048 23.02 12.1306C23.467 11.9563 23.946 11.8667 24.4298 11.8667C25.4069 11.8667 26.344 12.2319 27.0349 12.882C27.7259 13.5322 28.114 14.4139 28.114 15.3333C28.114 16.2528 27.7259 17.1345 27.0349 17.7846C26.344 18.4348 25.4069 18.8 24.4298 18.8Z"
        :fill="color[0]"
      />
    </svg>
    <svg v-if="props.type === 'bar'" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g clip-path="url(#clip0_789_25869)">
        <path d="M20 5V11.6667H5V5H20ZM26.6667 28.3333V35H5V28.3333H26.6667ZM36.6667 16.6667V23.3333H5V16.6667H36.6667Z" :fill="color[0]" />
      </g>
      <defs>
        <clipPath id="clip0_789_25869">
          <rect width="40" height="40" fill="white" />
        </clipPath>
      </defs>
    </svg>
    <svg v-if="props.type === 'clusterBar'" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M8.3335 23.3333H11.6668V35H8.3335V23.3333ZM31.6668 16.6667H35.0002V35H31.6668V16.6667ZM20.0002 6.66667H23.3335V35H20.0002V6.66667Z"
        :fill="color[1]"
      />
      <path
        d="M3.3335 20H6.66683V35H3.3335V20ZM26.6668 13.3333H30.0002V35H26.6668V13.3333ZM15.0002 3.33333H18.3335V35H15.0002V3.33333Z"
        :fill="color[0]"
      />
    </svg>
  </div>
</template>

<script lang="ts" setup>
interface Props {
  type: 'foldingLine' | 'scatter' | 'bar' | 'clusterBar';
}
const props = defineProps<Props>();
const lightColor = ['#0099FF', '#7FCCFF'];
const greyColor = ['#71797E', '#A2AAAF'];

const iconDom = ref<HTMLDivElement>(null);
const color = ref(greyColor);
const isActive = ref(false);
const setColor = () => {
  isActive.value = checkActive();
  color.value = isActive.value ? lightColor : greyColor;
};
const checkActive = () => {
  return iconDom.value.classList.contains('active') || iconDom.value.classList.contains('hover');
};

useMutationObserver(
  iconDom,
  () => {
    setColor();
  },
  {
    attributes: true
  }
);
onMounted(async () => {
  await nextTick();
  setColor();
});
</script>
